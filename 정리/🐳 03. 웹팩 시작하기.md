# ğŸ³ 03. ì›¹íŒ© ì‹œì‘í•˜ê¸°

## ğŸŒ 03-01. ì›¹íŒ© ì‹œì‘í•˜ê¸°

`ì›¹íŒ©`ì€ ìµœìŠ¨ í”„ëŸ°íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ì—ì„œ ê°€ì¥ ë§Œí ì‚¬ìš©ë˜ëŠ” **ëª¨ë“ˆ ë²ˆë“¤ëŸ¬**

í•„ìš”ì— ë”°ë¼ íŒŒì¼ì„ ë¶„ë¦¬í•˜ê±°ë‚˜ ì´ë¯¸ì§€ ì••ì¶•ë“± ì´ë¯¸ì§€ì˜ ìµœì í™”ê¹Œì§€ ì§„í–‰í•´ ì¤„ ìˆ˜ ìˆë‹¤.

> **ëª¨ë“ˆ ë²ˆë“¤ëŸ¬**
>
> ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ëŠ” ìì›(HTML, CSS, JS, Imageë“±)ì„ ëª¨ë‘ ê°ê°ì˜ ëª¨ë“ˆë¡œ ë³´ê³ , ì´ë¥¼ ì¡°í•©í•´ í•˜ë‚˜ì˜ ê²°ê³¼ë¬¼ì„ ë§Œë“œëŠ” ë„êµ¬.

ì¦‰, íŒŒì¼ë“¤ ê°„ì˜ ì—°ê´€ê´€ê³„ë¥¼ ë³´ê³ , í•˜ë‚˜ë¡œ í•©ì³ì£¼ëŠ”ê²Œ ëª¨ë“ˆ ë²ˆë“¤ëŸ¬. (í•©ì¹˜ëŠ” ì‘ì—…ì„ ë²ˆë“¤ë§)<br/>

![Bundle](./images/03_Bundle.png)

<br/><br/>

## ğŸŒ 03-02. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 1 - ì›¹íŒ© ì ìš© ì „

(Webpack Handbook 1ë²ˆë¶€í„° 4ë²ˆê¹Œì§€)

package.jsonì„ ë§Œë“¤ê³ , webpackê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ lodashë¥¼ ì„¤ì¹˜.

**ì‚¬ìš© ëª…ë ¹ì–´**

```shell
npm init -y

npm i webpack webpack-cli -D
npm i lodash
```

<br/>

ê·¸ë‹¤ìŒ `index.html` ìƒì„±.

```html
<html>
  <head>
    <title>Webpack Demo</title>
    <script src="https://unpkg.com/lodash@4.16.6"></script>
  </head>
  <body>
    <script src="src/index.js"></script>
  </body>
</html>
```

srcí´ë”ì— `index.js` ì‘ì„±<br/>( Componentë¥¼ bodyì— ë¶™ì´ëŠ” ì½”ë“œ )

```javascript
function component() {
  var element = document.createElement('div');

  /* lodash is required for the next line to work */
  element.innerHTML = _.join(['Hello','webpack'], ' ');

  return element;
}

document.body.appendChild(component());
```

![liveserver_result](./images/03_liveserver_result.jpg)

<br/>

### ğŸ“˜ ì°¸ê³ 

* [Webpack í•¸ë“œë¶ - Getting Started](https://joshua1988.github.io/webpack-guide/getting-started.htm)

<br/><br/>

## ğŸŒ 03-03. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 2 - ì›¹íŒ© ì ìš© í›„

(Webpack Handbook 5ë²ˆë¶€í„° 6ë²ˆê¹Œì§€)

ì›¹íŒ© ë¹Œë“œ ë° ë¹Œë“œ ê²°ê³¼ë¬¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ íŒŒì¼ ë‚´ìš© ìˆ˜ì •.

ê¸°ì¡´ì˜ CDNìœ¼ë¡œ lodashë¥¼ ë¶ˆëŸ¬ì˜¤ë˜ ë¶€ë¶„ì„ `index.js`ì—ì„œ import í•˜ê³ , buildê²°ê³¼ë¬¼ì¸ `distí´ë”`ì˜ main.jsë¥¼ ì‹¤í–‰í•˜ë„ë¡ ìˆ˜ì •.

```javascript
// index.js
import _ from 'lodash';

function component() {
  var element = document.createElement('div');

  /* lodash is required for the next line to work */
  element.innerHTML = _.join(['Hello','webpack'], ' ');

  return element;
}

document.body.appendChild(component());
```

```html
<html>
  <head>
    <title>Webpack Demo</title>
    <!-- <script src="https://unpkg.com/lodash@4.16.6"></script> -->
  </head>
  <body>
    <!-- <script src="src/index.js"></script> -->
    <script src="dist/main.js"></script>
  </body>
</html>
```

<br/>

package.jsonì—ì„œ **buildëª…ë ¹ì–´ë¥¼ scriptì— ì¶”ê°€.**

```json
"scripts": {
    "build": "webpack --mode=none",
  ...
}
```

<br/><br/>

## ğŸŒ 03-04. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 3 - mode ì ìš©

OSì— ë”°ë¼(ëª…ë ¹ì–´ ì°½ì˜ ê¸°ì¤€) ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë  ìˆ˜ë„, ì•ˆë ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— ì „ë¶€ë‹¤ ë™ì¼í•œ í™˜ê²½ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ì‹¤í–‰.

`webpack`ë§Œ ì‹¤í–‰í–ˆì„ ë•Œ, Warningì´ ë°œìƒí•˜ëŠ”ë°, ì´ë¥¼ ìœ„í•´ modeë¥¼ ì„¤ì •í•´ì¤€ë‹¤. (Webpack 4ì— ìƒˆë¡œ ìƒê¹€.)

`mode`ëŠ” **development**, **production**, **none**ê¹Œì§€ 3ê°€ì§€ ì¡´ì¬í•œë‹¤. (ê° ëª¨ë“œì—ë”°ë¼ ë¹Œë“œë˜ëŠ” í˜•íƒœê°€ ë‹¬ë¼ì§„ë‹¤.)

<br/><br/>

## ğŸŒ 03-05. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 4 - ì›¹íŒ© ì„¤ì • íŒŒì¼ ì ìš©

ë§Œì•½ distì˜ main.jsíŒŒì¼ì´ ì•„ë‹ˆë¼, publicí´ë”ì˜ output.jsë¡œ ìˆ˜ì •í•˜ê³ ì‹¶ë‹¤ê³  ê°€ì •í•´ë³´ì.

```json
{
	"build": "webpack --mode=none --entry=src/index.js --output=public/output.js",
}
```

ì´ëŸ°ì‹ìœ¼ë¡œ ì˜µì…˜ì„ ê³„ì† ì¶”ê°€í•´ ë‚˜ê°€ì•¼ í•œë‹¤.

ì´ë ‡ê²Œ ë§¤ë²ˆ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, `ì›¹íŒ© ì„¤ì • íŒŒì¼`ì„ í†µí•´ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

```js
// webpack.config.js
module.exports = {
  mode: 'none',
  entry: './src/index.js',
  output:'./public/output.js'
}
```

ì´ì œ webpack ëª…ë ¹ì–´ë§Œ ì‹¤í–‰í•˜ë©´, webpack.config.jsì˜ ì„¤ì •ì„ ë“¤ê³ ì™€ì„œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤.

<br/><br/>

## ğŸŒ 03-06. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 5 - ì›¹íŒ© ì„¤ì • íŒŒì¼ ì„¤ëª…

ì›¹íŒ© ì„¤ì •íŒŒì¼ì„ ë‹¤ì‹œë³´ì.

```js
// webpack.config.js
// `webpack` command will pick up this config setup by default
var path = require('path');

module.exports = {
  mode: 'none',
  entry: './src/index.js',
  output: {
    filename: 'main.js',
    path: path.resolve(__dirname, 'dist')
  }
};
```

* path: Nodejs pathë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë“¤ê³ ì™€ ë¡œë”©í•´ path ë³€ìˆ˜ì— ë‹´ì•„ë‘”ë‹¤.
* output : webpackì„ entryì—ìˆëŠ” íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ ëŒë ¤ì„œ, ê²°ê³¼ë¬¼ì„ ë‚´ëŠ”ë°, ê²°ê³¼ë¬¼ì˜ íŒŒì¼ëª…ê³¼ ê²½ë¡œë¥¼ ì„¤ì •í•´ì¤Œ.



### ğŸ“˜ ì°¸ê³ 

* [Node.js path API ë¬¸ì„œ](https://nodejs.org/api/path.html)



<br/><br/>

## ğŸŒ 03-07. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 6 - íŠœí† ë¦¬ì–¼ ì†ŒìŠ¤ ë¶„ì„

```javascript
// index.js
function component() {
  var element = document.createElement('div');

  /* lodash is required for the next line to work */
  element.innerHTML = _.join(['Hello','webpack'], ' ');

  return element;
}

document.body.appendChild(component());
```

ê¸°ì¡´ ì½”ë“œëŠ” CDNìœ¼ë¡œ lodashë¥¼ ê°€ì ¸ì™€ì„œ divíƒœê·¸ë¥¼ ë§Œë“¤ì–´ innerHTMLë¡œ div tagì— ë„£ì–´ ë¦¬í„´í•˜ì˜€ë‹¤.

<br/>

import í•œ lodashëŠ” es6ì˜ ëª¨ë“ˆ ë¬¸ë²•ì´ë‹¤.

```javascript
// es6
import _ from 'lodash';
// es5
// var _ = require('lodash');
```

<br/><br/>

## ğŸŒ 03-08. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 7 - ì›¹íŒ© ë³€í™˜ ì „í›„ ê²°ê³¼ ë¹„êµ

Webpackì ìš© ì „ í›„ì˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

ìš°ì„  ì‹¤í–‰í™”ë©´ì—ëŠ” í¬ê²Œ ì°¨ì´ê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.

`ê°œë°œìë„êµ¬ - ë„¤íŠ¸ì›Œí¬ íŒ¨ë„`ì—ì„œ ê·¸ ì°¨ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

| before                                                       | after                                                       |
| ------------------------------------------------------------ | ----------------------------------------------------------- |
| ![before_apply_webpack](./images/03_before_apply_webpack.jpg) | ![after_apply_webpack](./images/03_after_apply_webpack.jpg) |

beforeì˜ ê²½ìš° í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìš”ì²­í•˜ê³ , í•„ìš”í•œ íŒŒì¼ì„ ìš”ì²­ í•œë‹¤.

afterì˜ ê²½ìš°, jsíŒŒì¼ì„ í•˜ë‚˜ë¡œ í•©ì³ì„œ í•´ë‹¹ íŒŒì¼ë§Œ ìš”ì²­í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì´ëŸ° ìš”ì²­ì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ì˜¤ë˜ ê±¸ë¦¬ê²Œ ë˜ê³ , ì›¹íŒ©ì€ ì´ëŸ° ë¦¬í€˜ìŠ¤íŠ¸ë“¤ì„ í•˜ë‚˜ë¡œ ì¤„ì´ëŠ” ì´ì ì„ ê°€ì§€ê²Œ ëœë‹¤.

<br/><br/>

## ğŸŒ 03-09. ì›¹íŒ© ì‹œì‘í•˜ê¸° íŠœí† ë¦¬ì–¼ íŒŒíŠ¸ 8 - ì›¹íŒ© ë¹Œë“œ ê²°ê³¼ íŒŒì¼ ë¶„ì„

distí´ë”ì˜ main.jsë¥¼ ë³´ì. (í˜„ì¬ webpackì€ 5ë²ˆëŒ€ë¼ ì‘ì„±ëœ ë‚´ìš©ì˜ ê²°ê³¼ë¬¼ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. ê°•ì˜ëŠ” 4ë²ˆëŒ€)

```javascript
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ([
/* 0 */,
/* 1 */
/***/ (function(module, exports, __webpack_require__) {
  ...
```

ì›¹íŒ©ì—ì„œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” íŒŒì¼ë“¤, ëª¨ë“ˆë“¤ì„ í•˜ë‚˜ì˜ ë²ˆí˜¸ë¡œ ê´€ë¦¬ë¥¼ í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

<br/>

`IIFE(Immediately Invoked Function Expression)`ë¼ëŠ” ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜ì˜ êµ¬ì¡°ë¡œ ë˜ì–´ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. <br/>(ë‹¤ìŒê°•ì˜ì—ì„œ ì„¤ëª…)

```javascript
(function(){
  ...
})()
```



### ğŸ“˜ ì°¸ê³ 

* [MDN - ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜](https://developer.mozilla.org/ko/docs/Glossary/IIFE)